<!DOCTYPE html>
<html>
<head>
    <title>Управление ключами REST API</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1>Управление ключами REST API</h1>

        <form id="apiKeyForm">
            <div class="input-group mb-3">
                <input type="text" class="form-control" id="apiKeyInput" placeholder="Введите новый ключ">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button" id="generateKeyBtn">Создать ключ</button>
                </div>
            </div>
        </form>

        <div id="apiKeyList" class="mt-3">
            <h2>Список ключей REST API</h2>
            <ul class="list-group">
                <!-- Сюда будут добавляться ключи -->
            </ul>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
    <script>
        // Генерирование уникального ключа
        function generateApiKey() {
            return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
        }

        // Добавление ключа в список
        function addApiKey(key) {
            var apiKeyList = document.getElementById("apiKeyList");
            var apiKeyItem = document.createElement("li");
            apiKeyItem.className = "list-group-item";
            apiKeyItem.textContent = key;

            // Добавляем кнопку "Скопировать" справа
            var copyBtn = document.createElement("button");
            copyBtn.className = "btn btn-success btn-sm float-right";
            copyBtn.textContent = "Скопировать";
            copyBtn.setAttribute("data-clipboard-text", key);

            copyBtn.addEventListener("click", function () {
                var clipboard = new ClipboardJS(copyBtn);
                clipboard.on('success', function(e) {
                    alert('Ключ скопирован в буфер обмена: ' + e.text);
                });

                clipboard.onClick(copyBtn);
            });

            // Добавляем кнопку "Удалить" справа
            var deleteBtn = document.createElement("button");
            deleteBtn.className = "btn btn-danger btn-sm float-right ml-2";
            deleteBtn.textContent = "Удалить";
            deleteBtn.addEventListener("click", function () {
                apiKeyItem.remove();
            });

            apiKeyItem.appendChild(copyBtn);
            apiKeyItem.appendChild(deleteBtn);
            apiKeyList.querySelector("ul").appendChild(apiKeyItem);
        }

        // Обработчик кнопки "Создать ключ"
        document.getElementById("generateKeyBtn").addEventListener("click", function () {
            var apiKeyInput = document.getElementById("apiKeyInput");
            var apiKey = apiKeyInput.value.trim();

            if (apiKey === "") {
                alert("Введите ключ");
                return;
            }

            addApiKey(apiKey);
            apiKeyInput.value = "";
        });

        // Предварительно добавьте существующие ключи, если они есть
        addApiKey("example-key-1");
        addApiKey("example-key-2");
    </script>
</body>
</html>
